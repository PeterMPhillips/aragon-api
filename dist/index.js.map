{"version":3,"sources":["../src/index.js"],"names":["events","ACCOUNTS_TRIGGER","SYNC_STATUS_SYNCING","SYNC_STATUS_SYNCED","AppProxyHandler","get","target","name","receiver","params","rpc","sendAndObserveResponse","pipe","decorateAppWithIcons","icons","app","icon","size","src","AppProxy","constructor","provider","Messenger","accounts","sendAndObserveResponses","network","currentApp","installedApps","apps","map","getApps","identify","identifier","send","path","guiStyle","requestPath","emitTrigger","data","triggers","resolveAddressIdentity","address","requestAddressIdentityModification","searchIdentities","searchTerm","call","method","describeScript","script","describeTransaction","transaction","options","pastEvents","external","jsonInterface","eventsInterface","filter","item","type","contract","callMethods","constant","forEach","methodJsonDescription","intentMethods","requestSignMessage","message","web3Eth","datastore","cache","key","value","getCache","state","store","reducer","externals","init","CACHED_STATE_KEY","BLOCK_REORG_MARGIN","wrappedReducer","event","Promise","resolve","lastEvent","err","console","error","getCurrentEvents","fromBlock","getPastEvents","cachedFromBlock","toBlock","initializationBlock","returnValues","from","to","cacheValue$","v","latestBlock$","initState$","initialState","initState","store$","cacheValue","latestBlock","cachedState","block","cachedBlock","initialStoreState","pastEventsToBlock","Math","max","undefined","events$","currentEvents$","accounts$","account","eventsWithTriggers$","cacheState","toPromise","_","asyncScheduler","leading","trailing","connect","AragonApp","providers","MessagePortMessage","Proxy"],"mappings":"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","sourcesContent":["import { asyncScheduler, concat, defer, forkJoin, from, merge } from 'rxjs'\nimport {\n  catchError,\n  concatMap,\n  delayWhen,\n  endWith,\n  flatMap,\n  map,\n  mergeScan,\n  pluck,\n  publishReplay,\n  startWith,\n  switchMap,\n  tap,\n  throttleTime\n} from 'rxjs/operators'\nimport Messenger, { providers } from '@aragon/rpc-messenger'\nimport { debug, getIconBySize } from './utils'\n\nexport const events = {\n  ACCOUNTS_TRIGGER: 'ACCOUNTS_TRIGGER',\n  SYNC_STATUS_SYNCING: 'SYNC_STATUS_SYNCING',\n  SYNC_STATUS_SYNCED: 'SYNC_STATUS_SYNCED'\n}\n\nexport const AppProxyHandler = {\n  get (target, name, receiver) {\n    if (name in target) {\n      return target[name]\n    }\n\n    return function (...params) {\n      return target.rpc.sendAndObserveResponse(\n        'intent',\n        [name, ...params]\n      ).pipe(\n        pluck('result')\n      )\n    }\n  }\n}\n\nfunction decorateAppWithIcons ({ icons = [], ...app }) {\n  app.icon = (size = -1) => {\n    const icon = getIconBySize(icons, size)\n    if (icon && icon.src) {\n      return icon.src\n    }\n  }\n  return app\n}\n\n/**\n * A JavaScript proxy that wraps RPC calls to the wrapper.\n */\nexport class AppProxy {\n  constructor (provider) {\n    this.rpc = new Messenger(provider)\n  }\n\n  /**\n   * Get an array of the accounts the user currently controls over time.\n   *\n   * @return {Observable} Multi-emission Observable that emits an array of account addresses every time a change is detected.\n   */\n  accounts () {\n    return this.rpc.sendAndObserveResponses(\n      'accounts'\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Get the network the app is connected to over time.\n   *\n   * @return {Observable} Multi-emission Observable that emits an object with the connected network's id and type every time the network changes.\n   */\n  network () {\n    return this.rpc.sendAndObserveResponses(\n      'network'\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Get this app's information.\n   *\n   * @return {Observable} Single-emission Observable that emits the current app's information.\n   */\n  currentApp () {\n    // Note that we don't use an observe here as the currently running app should never have its\n    // internal details (e.g. proxy address, kernel address) and external details (e.g. ABI, name,\n    // description, etc.) change during run time.\n    //\n    // If these details ever change, the app should instead be restarted from the client running the\n    // app.\n    return this.rpc.sendAndObserveResponse(\n      'get_apps',\n      ['get', 'current']\n    ).pipe(\n      pluck('result'),\n      map(decorateAppWithIcons)\n    )\n  }\n\n  /**\n   * Get an array of the installed apps on the Kernel (organization) this app is attached to.\n   *\n   * @return {Observable} Multi-emission Observable that emits an array of installed Aragon apps on the Kernel every time a change is detected.\n   */\n  installedApps () {\n    return this.rpc.sendAndObserveResponses(\n      'get_apps',\n      ['observe', 'all']\n    ).pipe(\n      pluck('result'),\n      map((apps) => apps.map(decorateAppWithIcons))\n    )\n  }\n\n  /**\n   * DEPRECATED\n   * Get all installed apps on the Kernel\n   *\n   * @return {Observable} Multi-emission Observable that emits an array of installed Aragon apps on the Kernel every time a change is detected.\n   *\n   */\n  getApps () {\n    return this.rpc.sendAndObserveResponses(\n      'get_apps',\n      []\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Set the app identifier.\n   *\n   * This identifier is used to distinguish multiple instances of your app,\n   * so choose something that provides additional context to the app instance.\n   *\n   * Examples include: the name of a token that the app manages,\n   * the type of content that a TCR is curating, the name of a group etc.\n   *\n   * @param  {string} identifier The identifier of the app.\n   * @return {void}\n   */\n  identify (identifier) {\n    this.rpc.send(\n      'identify',\n      [identifier]\n    )\n  }\n\n  /**\n   * Get current path for the app. Useful for in-app routing and navigation.\n   *\n   * @return {Observable} Multi-emission Observable that emits the app's current path every time a change is detected.\n   */\n  path () {\n    return this.rpc.sendAndObserveResponses(\n      'path',\n      ['observe']\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Get the current GUI style.\n   *\n   * @return {Observable} Multi-emission Observable that emits the current GUI style every time a change is detected.\n   */\n  guiStyle () {\n    return this.rpc.sendAndObserveResponses(\n      'gui_style',\n      ['observe']\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Request a new path.\n   *\n   * @return {Observable} Single-emission Observable that emits if the path request succeeded and errors if rejected\n   */\n  requestPath (path) {\n    return this.rpc.sendAndObserveResponse(\n      'path',\n      ['modify', path]\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Emit an event trigger to all aragonAPI instances of your application.\n   *\n   * @param {string} name The name of the event\n   * @param {Object} [data] Optional event data\n   * @return {void}\n   */\n  emitTrigger (name, data) {\n    this.rpc.send('trigger', ['emit', name, data])\n  }\n\n  /**\n   * Subscribe to any emitted event triggers from all aragonAPI instances of your application.\n   *\n   * @return {Observable} Multi-emission Observable that emits new event triggers\n   */\n  triggers () {\n    return this.rpc.sendAndObserveResponses(\n      'trigger',\n      ['observe']\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Resolve an address' identity, using the highest priority provider.\n   *\n   * @param  {string} address Address to resolve.\n   * @return {Observable} Single-emission Observable that emits the resolved identity or null if not found\n   */\n  resolveAddressIdentity (address) {\n    return this.rpc.sendAndObserveResponse(\n      'address_identity',\n      ['resolve', address]\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Request an address' identity be modified with the highest priority provider.\n   *\n   * The request is typically handled by the aragon client.\n   *\n   * @param  {string} address Address to modify.\n   * @return {Observable} Single-emission Observable that emits if the modification succeeded and errors if cancelled by the user\n   */\n  requestAddressIdentityModification (address) {\n    return this.rpc.sendAndObserveResponse(\n      'address_identity',\n      ['modify', address]\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Search for identities that match a given search term.\n   *\n   * The request is typically handled by the Aragon client.\n   *\n   * @param  {string} searchTerm Search string\n   * @return {Observable} Single-emission Observable that emits with an array of any matching identities\n   */\n  searchIdentities (searchTerm) {\n    return this.rpc.sendAndObserveResponse(\n      'search_identities',\n      [searchTerm]\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Perform a read-only call on the app's smart contract.\n   *\n   * @param  {string} method The name of the method to call.\n   * @param  {...*} params An optional variadic number of parameters. The last parameter can be the call options (optional). See the [web3.js doc](https://web3js.readthedocs.io/en/1.0/web3-eth-contract.html#id16) for more details.\n   * @return {Observable} Single-emission Observable that emits the result of the call.\n   */\n  call (method, ...params) {\n    return this.rpc.sendAndObserveResponse(\n      'call',\n      [method, ...params]\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Decodes an EVM callscript and tries to describe the transaction path that the script encodes.\n   *\n   * @param  {string} script The EVM callscript to describe\n   * @return {Observable} Single-emission Observable that emits the described transaction path. The emitted transaction path is an array of objects, where each item has a `destination`, `data` and `description` key.\n   */\n  describeScript (script) {\n    return this.rpc.sendAndObserveResponse(\n      'describe_script',\n      [script]\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Try to describe a transaction based on its input data.\n   *\n   * @param  {Object} transaction Transaction object\n   * @param  {string} transaction.data Transaction's bytes data\n   * @param  {string} transaction.to Transaction's to address\n   * @return {Observable} Single-emission Observable that emits the transaction's description, if describable. The result is an object holding a string `description` and an array of objects as `annotatedDescription`.\n   */\n  describeTransaction (transaction) {\n    return this.rpc.sendAndObserveResponse(\n      'describe_transaction',\n      [transaction]\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Subscribe for events on your app's smart contract\n   *\n   * @param  {object} [options] web3.eth.Contract.events()' options\n   *   Unless explicitly provided, fromBlock is always defaulted to this app's initializationBlock\n   * @return {Observable} Multi-emission Observable that emits [Web3 events](https://web3js.readthedocs.io/en/1.0/glossary.html#specification).\n   */\n  events (options = {}) {\n    return this.rpc.sendAndObserveResponses(\n      'events',\n      ['allEvents', options]\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Fetch events from past blocks on your app's smart contract.\n   *\n   * @param  {object} [options] web3.eth.Contract.events()' options\n   *   Unless explicitly provided, fromBlock is always defaulted to this app's initializationBlock\n   * @return {Observable} Single-emission Observable that emits an array of [Web3 events](https://web3js.readthedocs.io/en/1.0/glossary.html#specification).\n   */\n  pastEvents (options = {}) {\n    return this.rpc.sendAndObserveResponse(\n      'past_events',\n      ['allEvents', options]\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Creates a handle to interact with an external contract\n   * (i.e. a contract that is **not** your app's smart contract, such as a token).\n   *\n   * @param  {string} address The address of the external contract\n   * @param  {Array<Object>} jsonInterface The [JSON interface](https://solidity.readthedocs.io/en/latest/abi-spec.html#abi-json) of the external contract.\n   * @return {Object}  An external smart contract handle, containing the following methods:\n   *   - `events(options)`: subscribe for events on the external contract, returns a multi-emission Observable that emits events\n   *   - `pastEvents(options)`: fetch events from past blocks on the external contract, returns a single-emission Observable with an array of past events\n   *   - Calling any other method on the handle will send a call or an external intent to the smart contract and return a single-emission Observable with the result\n   */\n  external (address, jsonInterface) {\n    const eventsInterface = jsonInterface.filter((item) => item.type === 'event')\n\n    const contract = {\n      events: (options = {}) => {\n        return this.rpc.sendAndObserveResponses(\n          'external_events',\n          [address, eventsInterface, 'allEvents', options]\n        ).pipe(\n          pluck('result')\n        )\n      },\n      pastEvents: (options = {}) => {\n        return this.rpc.sendAndObserveResponse(\n          'external_past_events',\n          [address, eventsInterface, 'allEvents', options]\n        ).pipe(\n          pluck('result')\n        )\n      }\n    }\n\n    // Bind calls\n    const callMethods = jsonInterface.filter(\n      (item) => item.type === 'function' && item.constant\n    )\n    callMethods.forEach((methodJsonDescription) => {\n      contract[methodJsonDescription.name] = (...params) => {\n        return this.rpc.sendAndObserveResponse(\n          'external_call',\n          [address, methodJsonDescription, ...params]\n        ).pipe(\n          pluck('result')\n        )\n      }\n    })\n\n    // Bind non-call (ie. \"write\") methods for external intents\n    const intentMethods = jsonInterface.filter(\n      (item) => item.type === 'function' && !item.constant\n    )\n    intentMethods.forEach((methodJsonDescription) => {\n      contract[methodJsonDescription.name] = (...params) => {\n        return this.rpc.sendAndObserveResponse(\n          'external_intent',\n          [address, methodJsonDescription, ...params]\n        ).pipe(\n          pluck('result')\n        )\n      }\n    })\n\n    return contract\n  }\n\n  /**\n   * Allow apps to sign arbitrary data via a RPC call\n   *\n   * @param  {string} message The message to sign\n   * @return {void}\n   */\n  requestSignMessage (message) {\n    return this.rpc\n      .sendAndObserveResponse('sign_message', [message])\n      .pipe(\n        pluck('result')\n      )\n  }\n\n  /**\n   * Invoke a whitelisted web3.eth function.\n   *\n   * @param  {string} method The method to call. Must be in the whitelisted group (mostly getters).\n   * @param  {...*} params Parameters for the call\n   * @return {Observable} Single-emission Observable that emits the return value of the call.\n   */\n  web3Eth (method, ...params) {\n    return this.rpc.sendAndObserveResponse(\n      'web3_eth',\n      [method, ...params]\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Interact with datastore\n   *\n   * @param  {method} key The method\n   * @return {string} Single-emission observable that emits the data as a result of interacting with the organization's data store. See the documentation in packages/aragon-wrapper/src/datastore/index.js for more details\n   */\n  datastore (method, ...params) {\n    return this.rpc.sendAndObserveResponse(\n      'datastore',\n      [method, ...params]\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Set a value in the application cache.\n   *\n   * @param  {string} key The cache key to set a value for\n   * @param  {string} value The value to persist in the cache\n   * @return {string} Single-emission Observable that emits when the cache operation has been committed\n   */\n  cache (key, value) {\n    return this.rpc.sendAndObserveResponse(\n      'cache',\n      ['set', key, value]\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Get a value from the application cache.\n   *\n   * @param  {string} key The cache key to get a value for\n   * @return {Observable} Single-emission Observable with the value for the specified cache key\n   */\n  getCache (key) {\n    return this.rpc.sendAndObserveResponse(\n      'cache',\n      ['get', key]\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Observe the cached application state over time.\n   *\n   * This method is also used to share state between the background script and front-end of your application.\n   *\n   * @return {Observable} Multi-emission Observable that emits the application state every time it changes. The type of the emitted values is application specific.\n   */\n  state () {\n    return this.rpc.sendAndObserveResponses(\n      'cache',\n      ['observe', 'state']\n    ).pipe(\n      pluck('result')\n    )\n  }\n\n  /**\n   * Application store constructor to be used in app script\n   * Listens for events, passes them through `reducer`, caches the resulting state and re-emits that state for easy chaining.\n   * Caches results to the `state` key to emit the new state for `api.state()` subscribers (e.g. a frontend).\n   *\n   * For caching purposes the event fetching is split into two steps:\n   *  - Fetching past events with `pastEvents`\n   *  - Subscribing to new events\n   *\n   * The reducer takes the signature `(state, event)` and should return either:\n   *  - a promise that resolves to state, even if it is unaltered by the event.\n   *  - a new state object\n   *\n   * Also note that the initial state is always `null`, not `undefined`, because of [JSONRPC](https://www.jsonrpc.org/specification) limitations.\n   *\n   * Optionally takes an options object with:\n   *   - `externals`: an array of external contracts to merge with this app's events,\n   *     for example you might use an external contract's Web3 events\n   *   - `init`: an initialization function run before events are passed through to the reducer,\n   *     useful for refreshing stale state from the contract (e.g. token balances)\n   *\n   * @param  {Function} reducer A function that reduces events to state. Can return a Promise that resolves to a new state.\n   * @param  {Object} [options] An optional options object\n   * @param  {Array.<{contract: Object, initializationBlock: String}>} [options.externals] An optional array of objects containing `contract` (as returned from `api.external`) and an optional `initializationBlock` from which to fetch events\n   * @param  {Function} [options.init] An optional initialization function for the state. Should return a promise that resolves to the init state.\n   * @return {Observable} Multi-emission Observable that emits the application state every time it changes. The type of the emitted values is application specific.\n   */\n  store (reducer, { externals = [], init } = {}) {\n    const CACHED_STATE_KEY = 'CACHED_STATE_KEY'\n    const BLOCK_REORG_MARGIN = 100\n\n    // Wrap the reducer in another reducer that allows us to execute code asynchronously\n    // in our reducer (due to the Promise wrapping). That's a lot of reducing.\n    //\n    // This is why we need the `mergeScan` operator below.\n    const wrappedReducer = ({ state }, event) =>\n      from(\n        // Ensure a promise is returned even if the reducer returns an array or throws\n        new Promise((resolve) => resolve(reducer(state, event)))\n      ).pipe(\n        map(state => ({ state, lastEvent: event })),\n        catchError((err) => {\n          console.error('Error from app reducer on event', err)\n          console.error('Current event', event)\n          console.error('Current state', state)\n          // Re-throw the error to stop the rest of the store() stream\n          throw err\n        })\n      )\n\n    const getCurrentEvents = (fromBlock) => merge(\n      this.events({ fromBlock }),\n      ...externals.map(({ contract }) => contract.events({ fromBlock }))\n    )\n\n    // If `cachedFromBlock` is null there's no cache, `pastEvents` will use the initializationBlock\n    // External contracts can specify their own `initializationBlock` which will be used in case the cache is empty,\n    // by default they will use the current app's initialization block.\n    const getPastEvents = (cachedFromBlock, toBlock) => merge(\n      this.pastEvents({ fromBlock: cachedFromBlock, toBlock }),\n      ...externals.map(\n        ({ contract, initializationBlock }) =>\n          contract.pastEvents({ fromBlock: cachedFromBlock || initializationBlock, toBlock })\n      )\n    ).pipe(\n      // single emission array of all pastEvents -> flatten to process events\n      flatMap(pastEvents => from(pastEvents)),\n      startWith({\n        event: events.SYNC_STATUS_SYNCING,\n        returnValues: {\n          from: cachedFromBlock,\n          to: toBlock\n        }\n      }),\n      endWith({\n        event: events.SYNC_STATUS_SYNCED,\n        returnValues: {}\n      })\n    )\n    const cacheValue$ = this.getCache(CACHED_STATE_KEY).pipe(\n      // ensure we always get at least an empty object instead of falsy\n      map(v => v || {}))\n    const latestBlock$ = this.web3Eth('getBlockNumber')\n    // init the app state with the cached state\n    const initState$ = init\n      ? cacheValue$.pipe(\n        switchMap(({ state }) => {\n          // Make sure `init()` gets a new copy of the cached state so that it doesn't\n          // accidentally manipulate the observable's object\n          const initialState = state ? { ...state } : null\n          return from(init(initialState))\n        }),\n        delayWhen((initState) => {\n          debug('- store - init state:', initState)\n          return this.cache('state', initState)\n        })\n      )\n      : from([null])\n\n    const store$ = forkJoin(cacheValue$, initState$, latestBlock$).pipe(\n      switchMap(([cacheValue, initState, latestBlock]) => {\n        const { state: cachedState, block: cachedBlock } = cacheValue\n        const initialStoreState = (init ? initState : cachedState) || null\n        debug('- store - initial store state', initialStoreState)\n        debug(`- store - cachedBlock ${cachedBlock} | latestBlock: ${latestBlock}`)\n\n        // The block up to which to fetch past events.\n        // The reduced state up to this point will be cached on every load\n        const pastEventsToBlock = Math.max(0, latestBlock - BLOCK_REORG_MARGIN)\n\n        if (cachedBlock !== undefined) {\n          debug(`- store - pastEvents: block ${cachedBlock} -> ${pastEventsToBlock} (${pastEventsToBlock - cachedBlock} blocks)`)\n        } else {\n          debug(`- store - pastEvents: initialization block -> ${pastEventsToBlock} (up to ${pastEventsToBlock} blocks)`)\n        }\n        debug(`- store - currentEvents$: block ${pastEventsToBlock} -> future`)\n\n        const events$ = concat(\n          // Past events\n          defer(() => getPastEvents(cachedBlock, pastEventsToBlock)),\n          // Current events\n          defer(() => {\n            // Fetch current events from block after cached block\n            const currentEvents$ = getCurrentEvents(pastEventsToBlock + 1)\n            // Observable which emits an web3.js event-like object with the address of the active account.\n            const accounts$ = this.accounts().pipe(\n              map(accounts => {\n                return {\n                  event: events.ACCOUNTS_TRIGGER,\n                  returnValues: {\n                    account: accounts[0]\n                  }\n                }\n              })\n            )\n\n            return merge(currentEvents$, accounts$)\n          })\n        )\n        const eventsWithTriggers$ = merge(events$, this.triggers())\n\n        return eventsWithTriggers$.pipe(\n          // Reduce\n          mergeScan(wrappedReducer, { state: initialStoreState }, 1),\n          // Cache commited state when past events have synced\n          tap(async ({ state, lastEvent = {} }) => {\n            if (lastEvent.event === events.SYNC_STATUS_SYNCED) {\n              debug(`- store - caching state (block ${pastEventsToBlock}):`, state)\n              const cacheState = {\n                block: pastEventsToBlock,\n                state\n              }\n\n              try {\n                await this.cache(CACHED_STATE_KEY, cacheState).toPromise()\n              } catch (_) {\n                console.error('Could not cache commited state')\n              }\n            }\n          }),\n          // Throttle to reduce rendering and caching overhead\n          // Must keep trailing to avoid discarding events\n          throttleTime(1000, asyncScheduler, { leading: false, trailing: true }),\n          // Use concatMap to ensure state is saved in the correct order\n          concatMap(async ({ state }) => {\n            debug('- store - reduced state:', state)\n            await this.cache('state', state).toPromise()\n\n            return state\n          })\n        )\n      }),\n      publishReplay(1)\n    )\n    store$.connect()\n\n    return store$\n  }\n}\n\n/**\n * This class is used to communicate with the wrapper in which the app is run.\n *\n * Every method in this class sends an RPC message to the wrapper through the provider.\n */\nexport default class AragonApp {\n  /**\n   * Create a connected AragonApp instance.\n   *\n   * @param {Object} [provider=MessagePortMessage] The provider used to send and receive messages to and from the wrapper.\n   */\n  constructor (provider = new providers.MessagePortMessage()) {\n    return new Proxy(\n      new AppProxy(provider),\n      AppProxyHandler\n    )\n  }\n}\n\n// Re-export the Aragon RPC providers\nexport { providers }\n"],"file":"index.js"}